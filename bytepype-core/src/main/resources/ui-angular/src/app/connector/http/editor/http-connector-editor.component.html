<div #httpConnectorEditor class="modal">
  <div class="flex">
    <div class="absolute inset-0 bg-gray-500 opacity-75 z-0"></div>
    <div class="absolute inset-0 place-items-center place-content-center z-10">
      <form [formGroup]="httpConnectorForm" class="card h-fit w-200 [&>div]:flex [&>div]:items-center [&>div]:py-2">
        <div class="flex justify-between">
          <p class="flex text-3xl pb-3">
            <img class="mr-2" src="http.svg" height="30" width="30" alt="connection-type-icon"/> {{id ? 'Modify HTTP Connector' : 'Create New HTTP Connector'}}
          </p>
          <button (click)="onClose()" class="pt-1 px-2 mr-4 self-start justify-self-end cursor-pointer rounded-sm bg-gray-100 hover:bg-gray-200">
            <i class="fa fa-times"></i>
          </button>
        </div>

        <hr class="hruler">

        <div>
          <label class="w-1/3 form-label required" for="name">Name</label>
          <div class="block w-full">
            <input class="w-2/3 input-text" type="text" id="name" formControlName="name">
          </div>
        </div>
        <div>
          <label class="w-1/3 form-label" for="description">Description</label>
          <div class="block w-full">
            <textarea class="w-2/3 input-text" id="description" formControlName="description" rows="2"></textarea>
          </div>
        </div>
        <div>
          <label class="w-1/3 form-label required" for="baseUrl">Base URL</label>
          <div class="block w-full">
            <input class="w-2/3 input-text" type="text" id="baseUrl" formControlName="baseUrl" placeholder="https://api.example.com">
          </div>
        </div>
        <div>
          <label class="w-1/3 form-label" for="authType">Authentication Type</label>
          <div class="block w-full">
            <select class="w-2/3 input-text" id="authType" formControlName="authType">
              @for (authType of authTypes; track authType.value) {
                <option [value]="authType.value">
                  {{ authType.label }}
                </option>
              }
            </select>
          </div>
        </div>

        @if (authTypeControl.value === 'BASIC') {
          <div>
            <label class="w-1/3 form-label required" for="username">Username</label>
            <div class="block w-full">
              <input class="w-2/3 input-text" type="text" id="username" formControlName="username">
            </div>
          </div>
          <div>
            <label class="w-1/3 form-label required" for="password">Password</label>
            <div class="block w-full">
              <input class="w-2/3 input-text" type="password" id="password" formControlName="password">
            </div>
          </div>
        }

        @if (authTypeControl.value === 'BEARER') {
          <div>
            <label class="w-1/3 form-label required" for="token">Token</label>
            <div class="block w-full">
              <input class="w-2/3 input-text" type="password" id="token" formControlName="token">
            </div>
          </div>
        }

        @if (authTypeControl.value === 'API_KEY') {
          <div>
            <label class="w-1/3 form-label required" for="apiKey">API Key</label>
            <div class="block w-full">
              <input class="w-2/3 input-text" type="password" id="apiKey" formControlName="apiKey">
            </div>
          </div>
          <div>
            <label class="w-1/3 form-label required" for="apiKeyHeader">Header Name</label>
            <div class="block w-full">
              <input class="w-2/3 input-text" type="text" id="apiKeyHeader" formControlName="apiKeyHeader" placeholder="X-API-Key">
            </div>
          </div>
        }

        <hr class="hruler">

        <div class="py-4 flex justify-between">
          <div>
            <button class="btn btn-blue" [disabled]="!httpConnectorForm.valid" (click)="onTest()">
              <i class="fa fa-link"></i> Test Connection
            </button>
          </div>
          <div>
            <button class="btn btn-gray mr-4" (click)="onClose()">
              <i class="fa fa-times"></i> Close
            </button>
            <button class="btn btn-blue" [disabled]="!httpConnectorForm.valid" (click)="onSubmit()">
              <i class="fa fa-save"></i> {{id ? 'Update' : 'Create'}}
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
